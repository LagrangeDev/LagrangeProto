syntax = "proto3";
package notify.v1;

message FriendRecall {
  FriendRecallInfo info = 1;
  uint32 inst_id = 2;
  uint32 app_id = 3;
  uint32 long_message_flag = 4;
  bytes reserved = 5;
}

message FriendRecallInfo {
  string from_uid = 1;
  string to_uid = 2;
  uint32 sequence = 3;
  uint64 new_id = 4;
  uint32 time = 5;
  uint32 random = 6;
  uint32 pkg_num = 7;
  uint32 pkg_index = 8;
  uint32 div_seq = 9;
}

message NewFriend {
  uint32 field1 = 1;
  NewFriendInfo info = 2;
}

message NewFriendInfo {
  string uid = 1;
  uint32 field2 = 2;
  fixed32 time = 3;
  string message = 4;
  string nick_name = 5;
  uint32 field6 = 6;
  uint32 field7 = 7;
  string to_uid = 9;
}

message FriendRequest {
  optional FriendRequestInfo info = 1;
}

message FriendRequestInfo {
  string target_uid = 1;
  string source_uid = 2;
  string message = 10;
  string source = 11;
}

message GroupAdmin {
  uint32 group_uin = 1;
  uint32 flag = 2;
  bool is_promote = 3;
  GroupAdminBody body = 4;
}

message GroupAdminBody {
  optional GroupAdminExtra extra_disable = 1;
  optional GroupAdminExtra extra_enable = 2;
}

message GroupAdminExtra {
  string admin_uid = 1;
  bool is_promote = 2;
}

message GroupChange {
  uint32 group_uin = 1;
  uint32 flag = 2;
  string member_uid = 3;
  uint32 decrease_type = 4;
  optional bytes operator = 5;
  uint32 increase_type = 6;
  optional bytes field7 = 7;
}

message OperatorInfo {
  OperatorField1 operator_field1 = 1;
}

message OperatorField1 {
  string operator_uid = 1;
  uint32 field2 = 2;
  bytes field3 = 3;
  uint32 field4 = 4;
  bytes field5 = 5;
}

message GroupInvitation {
  int32 cmd = 1;
  InvitationInfo info = 2;
}

message InvitationInfo {
  InvitationInner inner = 1;
}

message InvitationInner {
  uint32 group_uin = 1;
  uint32 field2 = 2;
  uint32 field3 = 3;
  uint32 field4 = 4;
  string target_uid = 5;
  string invitor_uid = 6;
  uint32 field7 = 7;
  uint32 field9 = 9;
  bytes field10 = 10;
  uint32 field11 = 11;
  string field12 = 12;
}

message GroupInvite {
  uint32 group_uin = 1;
  uint32 field2 = 2; // 1
  uint32 field3 = 3; // 4
  uint32 field4 = 4; // 0
  string invitor_uid = 5;
  bytes hashes = 6;
}

message GroupJoin {
  uint32 group_uin = 1;
  uint32 field2 = 2;
  string target_uid = 3;
  uint32 field4 = 4;
  optional string request_field = 5;
  uint32 field6 = 6;
  string field7 = 7;
  uint32 field8 = 8;
  bytes field9 = 9;
}

message GroupMute {
  uint32 group_uin = 1;
  uint32 sub_type = 2;
  uint32 field3 = 3;
  optional string operator_uid = 4;
  GroupMuteData data = 5;
}

message GroupMuteData {
  uint32 timestamp = 1;
  uint32 type = 2;
  GroupMuteState state = 3;
}

message GroupMuteState {
  optional string target_uid = 1;
  uint32 duration = 2; // uint.MaxValue = Mute else Lift
}

message GroupRecall {
  optional string operator_uid = 1;
  repeated RecallMessage recall_messages = 3;
  bytes user_def = 5;
  int32 group_type = 6;
  int32 op_type = 7;
}

message RecallMessage {
  uint64 sequence = 1;
  uint32 time = 2;
  uint32 random = 3;
  uint32 type = 4;
  uint32 flag = 5;
  string author_uid = 6;
}

message NotifyMessageBody {
  uint32 type = 1;
  uint32 group_uin = 4;
  bytes event_param = 5;
  GroupRecall recall = 11;
  uint32 field13 = 13;
  string operator_uid = 21;
  GeneralGrayTipInfo gray_tip_info = 26;
  EssenceMessage essence_message = 33;
  uint32 msg_sequence = 37;
  uint32 field39 = 39;
}

message EssenceMessage {
  uint32 group_uin = 1;
  uint32 msg_sequence = 2;
  uint32 random = 3;
  uint32 set_flag = 4; // set 1 remove 2
  uint32 author_uin = 5;
  uint32 operator_uin = 6;
  uint32 time_stamp = 7;
  uint32 msg_sequence2 = 8; // removed 0
  string operator_name = 9;
  string author_name = 10;
  uint32 set_flag2 = 11;
}

message GeneralGrayTipInfo {
  uint64 busi_type = 1;
  uint64 busi_id = 2;
  uint32 ctrl_flag = 3;
  uint32 c2_c_type = 4;
  uint32 service_type = 5;
  uint64 templ_id = 6;
  repeated TemplParam msg_templ_param = 7;
  string content = 8;
  uint32 random = 10;
}

message TemplParam {
  string key = 1;
  string value = 2;
}

message GroupSpecialTitle {
  string content = 2;
  uint32 field3 = 3;
  uint32 target_uin = 5;
}

message GroupReaction {
  uint32 group_uid = 4;
  GroupReactionData0 data = 44;
}

message GroupReactionData0 {
  GroupReactionData1 data = 1;
}

message GroupReactionData1 {
  GroupReactionData2 data = 1;
}

message GroupReactionData2 {
  GroupReactionTarget target = 2;
  GroupReactionData3 data = 3;
}

message GroupReactionTarget {
  uint32 sequence = 1;
}

message GroupReactionData3 {
  string code = 1;
  uint32 count = 3;
  string operator_uid = 4;
  uint32 type = 5;  // 1 Add, 2 Remove
}
